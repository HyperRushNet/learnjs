<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.svgrepo.com/show/303206/javascript-logo.svg">
    <title>Cheatsheet - HyperRush</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

    <style>
        :root{--bg:#0d0d0d;--text:#eee;--accent:#d4a1a1;--dark:#1a1a1a;--border:#333;--sidebar-w:280px}
        *{box-sizing:border-box}
        body{margin:0;background:var(--bg);color:var(--text);font-family:'Segoe UI',Consolas,Monaco,monospace;line-height:1.7;overflow-x:hidden}
        #sidebar{position:fixed;top:0;left:0;width:var(--sidebar-w);height:100vh;background:#111;border-right:1px solid var(--border);padding:40px 24px 120px;overflow-y:auto;z-index:100;scrollbar-width:thin;scrollbar-color:var(--accent) transparent}
        #sidebar::-webkit-scrollbar{width:6px;background:transparent}
        #sidebar::-webkit-scrollbar-thumb{background:var(--accent);border-radius:3px}
        #sidebar::-webkit-scrollbar-thumb:hover{background:#e6b8b8}
        #menu-toggle{position:fixed;top:20px;left:20px;z-index:1100;background:rgba(30,30,30,.9);border:none;width:48px;height:48px;border-radius:12px;cursor:pointer;display:none;flex-direction:column;justify-content:center;align-items:center;gap:5px;backdrop-filter:blur(10px);box-shadow:0 4px 15px rgba(0,0,0,.4);transition:all .3s}
        #menu-toggle span{width:22px;height:2px;background:#fff;border-radius:1px;transition:all .3s}
        #menu-toggle.active span:nth-child(1){transform:rotate(45deg) translate(6px,6px)}
        #menu-toggle.active span:nth-child(2){opacity:0}
        #menu-toggle.active span:nth-child(3){transform:rotate(-45deg) translate(6px,-6px)}
        #sidebar h1{font-size:1.55rem;margin:0 0 20px;color:#fff;text-align:center;font-weight:bold}
        #nav-list{list-style:none;padding:0;margin:0}
        #nav-list a{display:block;color:#bbb;text-decoration:none;padding:11px 16px;border-radius:8px;margin-bottom:6px;font-size:15px;transition:all .25s;position:relative}
        #nav-list a:hover{color:#fff;background:rgba(212,161,161,.15);transform:translateX(6px)}
        #nav-list a.active{color:#fff;background:rgba(212,161,161,.25);font-weight:600}
        #nav-list a.active::before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:70%;background:var(--accent);border-radius:2px}
        #nav-list a.dimmed{opacity:0.25;pointer-events:none}
        .main{margin-left:var(--sidebar-w);min-height:100vh;padding:30px 20px 100px;display:flex;justify-content:center;margin-bottom:100px}
        .container{width:100%;max-width:820px}
        h2{margin:70px 0 20px;font-size:1.7rem;border-bottom:1px solid var(--border);padding-bottom:10px;color:#fff;scroll-margin-top:100px}
        pre{background:#1e1e1e;padding:18px;border-radius:10px;border:1px solid #333;overflow-x:auto;margin:18px 0;box-shadow:0 4px 10px rgba(0,0,0,0.3)}
        pre code{font-size:15.5px;line-height:1.6}
        .divider{margin:90px 0 50px;border:none;border-top:3px solid var(--accent);opacity:0.6}
        .other-sections h2{margin-top:60px;opacity:0.7}
        @media(max-width:1024px){:root{--sidebar-w:240px}}
        @media(max-width:860px){
            #menu-toggle{display:flex}
            #sidebar{left:-100%;width:280px;transition:left .3s;box-shadow:8px 0 30px rgba(0,0,0,.6)}
            #sidebar.active{left:0}
            .main{margin-left:0}
        }
        @media(max-width:600px){
            .main{padding:20px 15px 150px}
            h2{margin:60px 0 18px;font-size:1.6rem}
        }
    </style>
</head>
<body>

<button id="menu-toggle" aria-label="Menu">
    <span></span><span></span><span></span>
</button>

<div id="sidebar">
    <h1>JS Cheatsheet</h1>
    <nav><ul id="nav-list"></ul></nav>
</div>

<div class="main">
    <div class="container">
        <div id="content"></div>
    </div>
</div>

<!-- Prism.js Core + JS language -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const sidebar = document.getElementById("sidebar");
        const nav = document.getElementById("nav-list");
        const content = document.getElementById("content");

        const sectionsData = [
            {title: "1) Variables", code: 'const varName = "data" // Cannot be changed.\nlet varName = "data" // Can be changed.\n// ============\nlet varName; // Var declaration\nvarName = "data" // Var assignment.'},
            {title: "2) Get JSON keys & values", code: 'Object.entries(data).forEach(([key, value]) => console.log(key, value))'},
            {title: "3) Event Listeners", code: '// Common events\nclick, dblclick, mousedown, mouseup, mouseenter, mouseleave\nkeydown, keyup, input, change, focus, blur\nsubmit, resize, scroll, load, DOMContentLoaded\npointerdown, touchstart, dragstart, drop', code2: 'element.addEventListener("click", handler)'},
            {title: "4) Simple Fetch", code: 'async function get(url, type = "json") {\n const res = await fetch(url);\n return await res[type]();\n}\n// Usage\nget("data.json").then(data => console.log(data))'},
            {title: "5) For Loops", code: 'for (let i = 0; i < 10; i++) {\n console.log(i);\n}'},
            {title: "6) While Loops", code: 'while (x < 5) {\n alert("X < 5! X = " + x);\n}'},
            {title: "7) If / Else", code: 'if (score >= 90) console.log("A");\nelse if (score >= 75) console.log("B");\nelse console.log("C");'},
            {title: "8) Arrays", code: 'const fruits = ["apple", "banana", "cherry"];\nfruits.forEach(f => console.log(f));'},
            {title: "9) Variables", code: 'let mutable = "changes ok";\nconst constant = "never changes";\nvar oldWay = "avoid if possible";'},
            {title: "10) Functions", code: 'function greet(name) {\n return `Hello, ${name}!`;\n}\n// Arrow\nconst greet = name => `Hello, ${name}!`;'},
            {title: "11) Objects", code: 'const person = {\n name: "Alice",\n greet() { console.log(`Hi, I\'m ${this.name}`); }\n};\nperson.greet();'},
            {title: "12) Template Literals", code: 'const name = "Bob";\nconst msg = `Hello, ${name.toUpperCase()}!`;'},
            {title: "13) Math & Random", code: '// Random int 0-9\nMath.floor(Math.random() * 10)\n\n// Random between min-max\nconst rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;'},
            {title: "14) Wait / Delay", code: 'const wait = ms => new Promise(r => setTimeout(r, ms));\nawait wait(2000);\nconsole.log("2 seconds later");'},
            {title: "15) Classes", code: 'class Person {\n constructor(name, age) { this.name = name; this.age = age; }\n greet() { console.log(`I\'m ${this.name}, ${this.age}yo`); }\n}\nnew Person("Alice", 25).greet();'},
            {title: "16) Nested Classes", code: 'class Math {\n static add(a, b) { return a + b; }\n static Utils = class { static double(n) { return n * 2; } }\n}\nMath.Utils.double(5); // 10'},
            {title: "17) .padStart / .padEnd", code: '"5".padStart(3, "0") // "005"\n"Hi".padEnd(10, ".") // "Hi........"'},
            {title: "18) .createElement()", code: 'const parentDiv = document.createElement("div");\nconst childDiv = document.createElement("div");\n\nparentDiv.id = "parent";\nchildDiv.id = "child";\n\ndocument.body.appendChild(parentDiv);\nparentDiv.innerText = "Hi";\nchildDiv.innerText = "I am a child!";\nparentDiv.appendChild(childDiv);'},
            {title: "19) .includes()", code: 'const array = ["Value 1","Value 2", "Value 3"];\nif(array.includes("Value 1"){ /* JS code here */ })'},
            {title: "20) .push()", code: 'const array = ["Item 1","Item 2"]\narray.push("Item 3") // Adds "Item 3" to array.'},
            {title: "21) .trim()", code: 'const variable = "    Hello World!    "\nconsole.log(variable.trim()) // "Hello World!"'}
        ];

        const sections = [];
        const links = [];

        sectionsData.forEach(sec => {
            const id = sec.title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');

            const h2 = document.createElement("h2");
            h2.id = id;
            h2.textContent = sec.title;

            const pre1 = document.createElement("pre");
            const code1 = document.createElement("code");
            code1.className = "language-javascript";
            code1.textContent = sec.code;
            pre1.appendChild(code1);

            const wrapper = document.createElement("div");
            wrapper.className = "section";
            wrapper.appendChild(h2);
            wrapper.appendChild(pre1);

            if (sec.code2) {
                const pre2 = document.createElement("pre");
                const code2 = document.createElement("code");
                code2.className = "language-javascript";
                code2.textContent = sec.code2;
                pre2.appendChild(code2);
                wrapper.appendChild(pre2);
            }

            const link = document.createElement("a");
            link.href = "javascript:void(0)";
            link.textContent = sec.title;
            link.dataset.target = id;
            nav.appendChild(link);

            sections.push({wrapper, h2, id});
            links.push(link);
        });

        function renderAll() {
            content.innerHTML = "";
            sections.forEach(s => content.appendChild(s.wrapper));
            links.forEach(a => a.classList.remove("dimmed"));
            Prism.highlightAllUnder(content);
        }

        function renderSearch(matches) {
            content.innerHTML = "";
            if (matches.length === 0) {
                content.innerHTML = "<h2 style='text-align:center;opacity:0.7'>Geen sectie gevonden</h2>";
                links.forEach(a => a.classList.add("dimmed"));
                return;
            }
            matches.forEach(s => content.appendChild(s.wrapper));
            if (matches.length < sections.length) {
                const divider = document.createElement("hr");
                divider.className = "divider";
                content.appendChild(divider);
                const otherTitle = document.createElement("h2");
                otherTitle.textContent = "Overige secties";
                content.appendChild(otherTitle);
                const other = document.createElement("div");
                other.className = "other-sections";
                sections.forEach(s => !matches.includes(s) && other.appendChild(s.wrapper.cloneNode(true)));
                content.appendChild(other);
            }
            links.forEach(link => {
                const isMatch = matches.some(m => m.id === link.dataset.target);
                link.classList.toggle("dimmed", !isMatch);
            });
            Prism.highlightAllUnder(content);
        }

        function updateActive() {
            let best = null;
            let bestDist = Infinity;
            sections.forEach(s => {
                const rect = s.h2.getBoundingClientRect();
                const dist = Math.abs(rect.top - 120);
                if (rect.top <= 300 && dist < bestDist) {
                    bestDist = dist;
                    best = s;
                }
            });
            if (!best) return;

            links.forEach(link => {
                const active = link.dataset.target === best.id;
                link.classList.toggle("active", active);
                if (active) link.scrollIntoView({ behavior: "smooth", block: "center" });
            });
        }

        links.forEach(link => {
            link.addEventListener("click", () => {
                const target = document.getElementById(link.dataset.target);
                window.scrollTo({ top: target.offsetTop - 100, behavior: "smooth" });
                if (window.innerWidth <= 860) {
                    sidebar.classList.remove("active");
                    document.getElementById("menu-toggle").classList.remove("active");
                }
            });
        });

        document.getElementById("menu-toggle").addEventListener("click", () => {
            sidebar.classList.toggle("active");
            document.getElementById("menu-toggle").classList.toggle("active");
        });

        let searching = false;
        document.addEventListener("keydown", e => {
            if (e.key === "f" && (e.ctrlKey || e.metaKey)) {
                e.preventDefault();
                if (searching) return;
                searching = true;

                const query = prompt("Zoek in secties:").trim();
                if (!query) {
                    renderAll();
                    updateActive();
                    searching = false;
                    return;
                }

                const matches = sections.filter(s => s.h2.textContent.toLowerCase().includes(query.toLowerCase()));
                renderSearch(matches);

                if (matches.length > 0) {
                    setTimeout(() => {
                        window.scrollTo({ top: matches[0].h2.offsetTop - 100, behavior: "smooth" });
                        updateActive();
                    }, 100);
                }
                searching = false;
            }
        });

        window.addEventListener("scroll", updateActive);

        renderAll();
        updateActive();
    });
</script>
</body>
</html>
